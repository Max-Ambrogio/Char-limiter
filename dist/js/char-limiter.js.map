{"version":3,"sources":["char-limiter.js"],"names":["CharLimiter","elementFromOutside","max","evt","curLen","target","value","length","remaining","options","span","document","querySelector","innerText","style","color","console","log","includes","keyCode","preventDefault","element","DEFAULT_OPTIONS","trimEmpty","dataset","cleanOptions","setUp","object","Object","keys","forEach","key","parseInt","feedback","createElement","classList","add","parentNode","appendChild","addEventListener","handleKeyDown","handleKeyUp"],"mappings":"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","sourcesContent":["/**\r\n * CharLimiter will be given a single DOM element to do it's thing. \r\n * \r\n * @constructor Takes a single DOM element \r\n * @var element element\r\n * @var options\r\n */\r\n\r\nclass CharLimiter {\r\n\r\n    /**\r\n     * takes two arg and returns a string \r\n     * @param {string} param1 \r\n     * @param {int} param2 \r\n     */\r\n\r\n     DEFAULT_OPTIONS = {\r\n        max : 10\r\n     }\r\n\r\n    constructor(elementFromOutside) {\r\n        console.log(elementFromOutside)\r\n        this.element = elementFromOutside\r\n        this.options = {\r\n            ...this.DEFAULT_OPTIONS,\r\n            ...this.trimEmpty(elementFromOutside.dataset)\r\n        }\r\n        this.cleanOptions()\r\n        console.log(\"setting up new char limit for \", this.element, this.options)\r\n        this.setUp()\r\n    }\r\n\r\n    /**\r\n     * remove any keys with empty null bodies\r\n     * @param {Object} object \r\n     * @returns object\r\n     */\r\n    trimEmpty(object){\r\n        Object.keys(object).forEach((key) => {\r\n            if (!object[key]) {\r\n                delete object[key]\r\n            }\r\n        })\r\n\r\n        return object\r\n    }\r\n\r\n    cleanOptions(){\r\n        ['max' , 'min'].forEach((key) => {\r\n            if (this.options[key]){\r\n               this.options[key] = parseInt(this.options[key]) \r\n            }\r\n        })\r\n        // this.options.max = parseInt(this.options.max)\r\n        // this.options.min = parseInt(this.options.min)\r\n    }\r\n\r\n    setUp(){\r\n        console.log(\"adding listener for \", this.element)\r\n\r\n        this.feedback = document.createElement('span')\r\n        this.feedback.classList.add(\"feedback\")\r\n        this.element.parentNode.appendChild(this.feedback)\r\n\r\n        this.element.addEventListener('keydown', this.handleKeyDown)\r\n        this.element.addEventListener('keyup', this.handleKeyUp)\r\n\r\n    }\r\n\r\n    handleKeyDown = (evt) => {\r\n        const curLen = evt.target.value.length\r\n        const remaining = this.options.max - curLen\r\n\r\n        const span = document.querySelector(\".feedback\")\r\n        span.innerText = remaining + \" characters left\"\r\n\r\n        if(curLen > 5) {\r\n            span.style.color = \"red\"  \r\n            if(curLen <= 6) {\r\n                span.style.color = \"black\"\r\n            }      \r\n        }\r\n\r\n        //keypress check if lenght of the input is 0\r\n        //if lenght is = 0 remove span\r\n\r\n        console.log('keydown' , curLen, remaining)\r\n        if(remaining <= 0) {\r\n            if ([8, 46, 37, 39].includes(evt.keyCode)) {return}\r\n            evt.preventDefault()\r\n        }\r\n    }\r\n\r\n    handleKeyUp = (evt) => {\r\n        const curLen = evt.target.value.length\r\n        const remaining = this.options.max - curLen\r\n        \r\n    }\r\n\r\n}"],"file":"char-limiter.js"}